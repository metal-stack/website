---
slug: /release-notes/v0.21.9
title: v0.21.9
sidebar_position: 1
---
# metal-stack v0.21.9
See original release note at [https://github.com/metal-stack/releases/releases/tag/v0.21.9](https://github.com/metal-stack/releases/releases/tag/v0.21.9)
## General
* [Gardener v1.117](https://github.com/gardener/gardener/releases/tag/v1.117.0)
## Required Actions
* We recommend running the `metal-metrics-exporter` with a `Metal-View` auth type. The new Ansible variable `monitoring_metal_api_authtype` was introduced. By default, `Metal-View` is used. Please make sure, to update the auth type, if you want to run the exporter with higher privileges or verify, if `monitoring_metal_api_hmac` is configured correctly to be a view HMAC. (metal-stack/metal-roles#449)
* Before deploying this version, all ONTAP storage classes in all affected shoots must be deleted, since storage classes are immutable. (metal-stack/gardener-extension-ontap#57)
* The container image `metalstack/builder` is not published on Docker Hub anymore. Please migrate to `ghcr.io/metal-stack/builder` in case you are using the image from Docker Hub. (metal-stack/builder#83)
## Breaking Changes
* The `audittailer` pod is now being deployed into the `kube-system` namespace and not anymore into the dedicated `audit` namespace. (metal-stack/gardener-extension-audit#50)
* In the audit extension, the splunk backend now validates the TLS hostname. Verify that your splunk backend uses a TLS certificate that matches the hostname. (metal-stack/gardener-extension-audit#51)
## Component Releases
### gardener-extension-ontap v0.2.3
* Trident deployment refactor (metal-stack/gardener-extension-ontap#32) @Honigeintopf
* Create network interface on both nodes (metal-stack/gardener-extension-ontap#25) @Honigeintopf
* Remove services, remove data lif (metal-stack/gardener-extension-ontap#24) @Honigeintopf
* Release Helm OCI artifacts. (metal-stack/gardener-extension-ontap#17) @Honigeintopf
* Nvme Modprobe Of Worker Node (metal-stack/gardener-extension-ontap#20) @Honigeintopf
* include sbom in container image (metal-stack/gardener-extension-ontap#12) @mac641
* Unexport more, refactor to use retry-go, support iscsi (metal-stack/gardener-extension-ontap#9) @majst01
* Introduce svnManager to reuse clients and logger (metal-stack/gardener-extension-ontap#8) @majst01
* Unexport, remove unneeded parameters, remove common pkg (metal-stack/gardener-extension-ontap#7) @majst01
* remove fmt.Printf, use structured logging, unexport consts (metal-stack/gardener-extension-ontap#6) @majst01
* Update gardener to 1.114 (metal-stack/gardener-extension-ontap#5) @majst01
* Default add options manager (metal-stack/gardener-extension-ontap#4) @Honigeintopf
* First code review (metal-stack/gardener-extension-ontap#3) @majst01
* Use new ontap-go metroclusterclient (metal-stack/gardener-extension-ontap#35) @Honigeintopf
* Add ctx to all api calls to ontap (metal-stack/gardener-extension-ontap#34) @Honigeintopf
* Add storage encryption labels (metal-stack/gardener-extension-ontap#22) @Honigeintopf
* first approach to create cwnp as mr manifests (metal-stack/gardener-extension-ontap#38) @Honigeintopf
* Bugfix for password requirement (metal-stack/gardener-extension-ontap#40) @Honigeintopf
* Update dependencies (metal-stack/gardener-extension-ontap#37) @majst01
* Remove Aggregate (metal-stack/gardener-extension-ontap#41) @Honigeintopf
* Simplify controller configuration (metal-stack/gardener-extension-ontap#39) @majst01
* distribute lifs on both nodes (metal-stack/gardener-extension-ontap#47) @Honigeintopf
* Template Secret (metal-stack/gardener-extension-ontap#44) @majst01
* Allow volume expansion (metal-stack/gardener-extension-ontap#53) @majst01
* change pause container from busybox to pause (metal-stack/gardener-extension-ontap#51) @mwennrich
* Create ontap-encrypted storageclass (metal-stack/gardener-extension-ontap#54) @majst01
### gardener-extension-audit v0.2.2
* change shoot-namespace to kube-system (metal-stack/gardener-extension-audit#50) @ostempel
* Splunk: Remove duplicate secret (metal-stack/gardener-extension-audit#46) @dergeberl
* Ensure audit-webhook-backend sts restart on changes to backend configuration (metal-stack/gardener-extension-audit#49) @MichaelEischer
* Add S3 as backend (metal-stack/gardener-extension-audit#47) @dergeberl
* Update fluentbit and enable tls.verify_hostname for splunk (metal-stack/gardener-extension-audit#51) @MichaelEischer
### metal-ansible-modules v0.2.11
* Ship as OCI artifact. (metal-stack/metal-ansible-modules#22) @Gerrit91
### ansible-common v0.7.2
* Ship as OCI artifact. (metal-stack/ansible-common#38) @Gerrit91
* Use appropriate shebang lines for ansible modules. (metal-stack/ansible-common#40) @Gerrit91
### helm-charts v0.4.25
* Make postgreslet anti affinity topology key configurable (metal-stack/helm-charts#128) @eberlep
* Next Postgreslet Release (metal-stack/helm-charts#127) @eberlep
* Postgreslet: Add dedicated fluentbit tag for the backup log (metal-stack/helm-charts#126) @eberlep
* Add pg_role metrics (metal-stack/helm-charts#124) @TLINDEN
* Add query to monitor pg_stat_wal_receiver (metal-stack/helm-charts#122) @eberlep
* Fix SQL error in postgres-exporter query config when executing WAL check on standby node (metal-stack/helm-charts#121) @TLINDEN
* use distinct on pg_stat_statements to avoid postgres-exporter crash (metal-stack/helm-charts#114) @TLINDEN
### metal-roles v0.17.13
* add ontap to gardener-operator (metal-stack/metal-roles#446) @Honigeintopf
* Provide more roles for gardener operator setup. (metal-stack/metal-roles#436) @Gerrit91
* add netapp/trident images to oci-mirror config (metal-stack/metal-roles#457) @mwennrich
* Make global Prometheus scrape parameters configurable (metal-stack/metal-roles#455) @simcod
* Remove unknown fields from new gardener roles. (metal-stack/metal-roles#458) @Gerrit91
* feat: alertmanager additional rules and receivers (metal-stack/metal-roles#459) @vknabel
* Use `metal-view` as hmac default variable for `metal-metrics-exporter` (metal-stack/metal-roles#449) @simcod
* Adjust sonic-config role to new sonic-configdb-utils version (metal-stack/metal-roles#463) @iljarotar
* Fix sonic-config template (metal-stack/metal-roles#464) @iljarotar
### masterdata-api v0.12.0
* Migrate away from deprecated wrappers (metal-stack/masterdata-api#81) @majst01
* include sbom in container image (metal-stack/masterdata-api#124) @mac641
* Fix duplicate memberships in tenant delete (metal-stack/masterdata-api#123) @iljarotar
### metalctl v0.18.3
* use sha512 in updater to fix md5 checksum mismatch errors (metal-stack/metalctl#288) @mac641
* Include SBOM into container image and as release asset (metal-stack/metalctl#286) @mac641
* Upgrade  metal-lib with new tableprinter version (metal-stack/metalctl#285) @BotondGalxc
### gardener-extension-backup-s3 v0.8.0
* improve resource naming of chart by using fullname rather than the static gardener-extension-backup-s3 (metal-stack/gardener-extension-backup-s3#18) @nschad
* Harden deployment to comply with pod security standard "restricted" (metal-stack/gardener-extension-backup-s3#19) @MichaelEischer
### metal-api v0.42.2
* Size services (metal-stack/metal-apiserver#49) @majst01
* Log call duration if debug is true (metal-stack/metal-apiserver#56) @majst01
* Token Refresh Service (metal-stack/metal-apiserver#51) @majst01
* Spread only on same machine size. (metal-stack/metal-api#625) @Gerrit91
* Include sbom in container image (metal-stack/metal-api#622) @mac641
* Project is not used in size validation, remove it (metal-stack/metal-api#621) @majst01
* Provide network type migration as preparation for MEP-4. (metal-stack/metal-api#620) @Gerrit91
* Update masterdata-api depedency. (metal-stack/metal-api#627) @Gerrit91
* Fix broken audit search. (metal-stack/metal-api#629) @Gerrit91
* Ignore delayed buffered phoned home events during machine reclaim (metal-stack/metal-api#631) @iljarotar
### sonic-configdb-utils v0.4.1
* Support different build branches (metal-stack/sonic-configdb-utils#30) @iljarotar
* yaml is not yml (metal-stack/sonic-configdb-utils#31) @iljarotar
### metal-core v0.13.0
* Add vrf to vni mapping (metal-stack/metal-core#144) @iljarotar
* Read SONiC interfaces from ConfigDB (metal-stack/metal-core#161) @iljarotar
* Cleanup VLANs and VRFs on SONiC (metal-stack/metal-core#155) @iljarotar
* Graceful shutdown (metal-stack/metal-core#109) @robertvolkmann
* include sbom in container image (metal-stack/metal-core#157) @mac641
* Bump golang.org/x/net from 0.35.0 to 0.38.0 (metal-stack/metal-core#154) @[dependabot[bot]](https://github.com/apps/dependabot)
# Merged Pull Requests
This is a list of pull requests that were merged since the last release. The list does not contain pull requests from release-vector-repositories.

The fact that these pull requests were merged does not necessarily imply that they have already become part of this metal-stack release.

* Bump releases to version v0.21.8 (metal-stack/docs#303) @metal-robot[bot]
* replace md5sum using sha512sum (metal-stack/updater#15) @mac641
* Workaround GitHub Pagination for releases (metal-stack/updater#18) @vknabel
* Update Postgres to 14.10 of ipam and masterdata (metal-stack/releases#246) @majst01
* Introduce new cluster type tags (metal-stack/metal-lib#185) @thheinel
* Change ontap client to slice (metal-stack/ontap-go#5) @Honigeintopf
* Add OCI refs for ansible roles. (metal-stack/releases#248) @Gerrit91
* Add cluster api provider metal stack (metal-stack/releases#245) @vknabel
* bump go to 1.24.x and golangci-lint-action to v8 (metal-stack/updater#17) @mac641
* update Masterminds/semver to v3.4.0 (and other deps) (metal-stack/oci-mirror#15) @mwennrich
* include sbom in container image (metal-stack/gardener-extension-duros#3) @mac641
* Upgrade Tablewriter to v1 (metal-stack/metal-lib#181) @BotondGalxc
* investigate and fix `invalid argument` error while checking location permissions (metal-stack/updater#19) @mac641
* Bump github.com/go-viper/mapstructure/v2 from 2.2.1 to 2.3.0 (metal-stack/metal-lib#183) @dependabot[bot]
* More infos on contents of the planning meeting and for contributions. (metal-stack/docs#305) @Gerrit91
* Cumulus is not in release flow anymore. (metal-stack/docs#306) @Gerrit91
* frr 10.4 was released but 10.3.1 is not installable anymore (metal-stack/metal-images#324) @majst01
* Fix typo in the hardware network cards section (metal-stack/docs#308) @GeertJohan
* Add a generic python driver (metal-stack/api#21) @majst01
* Fix python build if it is the first time (metal-stack/api#23) @majst01
* Update available OS Images (metal-stack/docs#309) @majst01
* Communication matrix (metal-stack/docs#307) @vknabel
* Provide information about used technologies and protocols (metal-stack/docs#302) @simcod
* Add infra switch service (metal-stack/api#24) @iljarotar
* Update to frr 10.4.1 and kernel mainline v6.12.41 (metal-stack/metal-images#332) @simcod
* machine api definitions for get, list and update (metal-stack/api#22) @majst01
* Rename machine-role to machine-allocation-type which is more appropriate (metal-stack/api#28) @majst01
* By accident machine-allocation-type was optional (metal-stack/api#29) @majst01
* Update metal-lib, adopt tablewriter (metal-stack/cli#5) @majst01
* Admin machine get and list (metal-stack/api#31) @majst01
* Bump metal-api to version v0.41.3 (metal-stack/metal-python#154) @metal-robot[bot]
* Bump metal-api to version v0.41.3 (metal-stack/metal-go#214) @metal-robot[bot]
* Use yq docker image instead of local install (metal-stack/metal-go#212) @iljarotar
* Bump metal-api to version v0.42.0 (metal-stack/metal-python#155) @metal-robot[bot]
* Bump metal-api to version v0.42.0 (metal-stack/metal-go#215) @metal-robot[bot]
* MEP-17 global network view (metal-stack/docs#145) @majst01
* Unify naming of reference fields (metal-stack/api#27) @majst01
* Go 1.25 (metal-stack/builder#85) @majst01
* Add duros extension (metal-stack/gardener-extension-duros#1) @ostempel
* Fix release drafter merges sections on common component prefixes. (metal-stack/metal-robot#86) @Gerrit91
* Update to go-1.25 and mockery (metal-stack/api#32) @majst01
* Small fork build improvements for issues handler. (metal-stack/metal-robot#88) @Gerrit91
* Skip empty code blocks to be added to release draft. (metal-stack/metal-robot#89) @Gerrit91
* Also support REQUIRED_ACTIONS along with ACTIONS_REQUIRED. (metal-stack/metal-robot#87) @Gerrit91
* include SBOM in container image (metal-stack/oci-mirror#16) @mac641
* Go 1.25 (metal-stack/firewall-controller#205) @majst01
* introduce standard docker workflow and include sbom in container images (metal-stack/builder#83) @mac641
* Remove useless query parameter, make partition require for admin machine list (metal-stack/api#33) @majst01
* Remove last reinstall artifact (metal-stack/api#34) @majst01
* include generating sbom in actions workflow (metal-stack/go-lldpd#30) @mac641
* Fix link formatting for go-containerregistry (metal-stack/oci-mirror#17) @guettli
* Automatically remove triage label when changing item status. (metal-stack/metal-robot#82) @Gerrit91
* Bump metal-api to version v0.42.1 (metal-stack/metal-python#156) @metal-robot[bot]
* Bump metal-api to version v0.42.1 (metal-stack/metal-go#216) @metal-robot[bot]
* Fix linting issues of new linter version. (metal-stack/metal-lib#189) @Gerrit91
* Better deal with gRPC errors in auditing. (metal-stack/metal-lib#186) @Gerrit91
* Auto generate first release (metal-stack/website#73) @Gerrit91
* More realistic redirects (metal-stack/website#64) @vknabel
* fix: force redirects for domains (metal-stack/website#76) @vknabel
* Fix link to doc archive in nav. (metal-stack/website#75) @Gerrit91
* docs: link to capms ref docs (metal-stack/website#77) @vknabel
* Minor updates on `README.md` (metal-stack/website#78) @Gerrit91
* Go 1.25 (metal-stack/nftables-exporter#35) @majst01
* fix: missing redirects and inconsistent urls (metal-stack/website#80) @vknabel
* Allow setting labels on projects and tenant requests. (metal-stack/api#36) @Gerrit91
* Update connectpy (metal-stack/api#37) @majst01
* Try is reserved in python (metal-stack/api#38) @majst01
* fix: tag pagination and wrong month for post (metal-stack/website#84) @vknabel
* Use python sync client. (metal-stack/api#39) @Gerrit91
* Bump metal-api to version v0.42.2 (metal-stack/metal-python#157) @metal-robot[bot]
* Bump metal-api to version v0.42.2 (metal-stack/metal-go#217) @metal-robot[bot]
* Remove unused try fsl response (metal-stack/api#40) @majst01
* Remove old repository name occurrences. (metal-stack/website#81) @Gerrit91
* Add labels to query requests where possible. (metal-stack/api#41) @Gerrit91
* docs: proposal process (metal-stack/website#89) @vknabel
* Information about BMC user management (metal-stack/website#82) @simcod
* Check if user password change is necessary via ipmitool (metal-stack/go-hal#76) @simcod
* Next release (metal-stack/releases#247) @metal-robot[bot]